<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <meta name="theme-color" content="#0e1116" />
  <title>Neuro-Bot GPT-5 • Luma • Runway • Midjourney • Deepgram • Gemini</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root{
      --bg:#0e1116; --card:#141926; --muted:#99a2b2; --text:#e8ecf1;
      --accent:#4b8bfd; --accent-2:#7aa0ff; --chip:#1b2233; --chip-br:#2a3550; --shadow:0 6px 24px rgba(0,0,0,.25);
      --br:14px;
    }
    html,body{background:var(--bg);color:var(--text);font:16px/1.55 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"Helvetica Neue",Arial,sans-serif;margin:0;}
    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:980px;margin:0 auto;padding:12px 14px}
    header{position:sticky;top:0;background:rgba(14,17,22,.92);backdrop-filter:blur(6px);z-index:10;border-bottom:1px solid #1b2436}
    .head-row{display:flex;gap:8px;align-items:center;justify-content:flex-start;padding:6px 6px;}
    .brand{display:flex;gap:8px;align-items:center;min-width:0}
    .logo{width:24px;height:24px;border-radius:7px;background:linear-gradient(135deg,#4b8bfd 0%,#7aa0ff 100%);box-shadow:var(--shadow);flex:0 0 24px}
    h1{font-size:14px;line-height:1.15;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100vw}
    .muted-top{color:var(--muted);font-size:11.5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100vw}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    .card{background:var(--card);border:1px solid #202a44;border-radius:var(--br);box-shadow:var(--shadow);padding:16px}
    h2{margin:6px 0 10px 0;font-size:18px}
    .muted{color:var(--muted)}
    .badge{display:inline-block;background:var(--chip);border:1px solid var(--chip-br);padding:6px 10px;border-radius:999px;font-size:12px;margin:4px 6px 0 0}
    .list{margin:8px 0 0 0;padding:0 0 0 18px}
    .hr{height:1px;background:#1b2436;margin:14px 0}
    .price{font-size:24px;font-weight:800;letter-spacing:.2px}
    .note{font-size:13px;color:var(--muted)}
    .tariff-feats{margin:8px 0 0 0;padding:0;list-style:none}
    .tariff-feats li{margin:7px 0;display:flex;gap:10px}
    .chip-row{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:9px 12px;border-radius:10px;background:var(--accent);color:#fff;font-weight:600;border:0;cursor:pointer;font-size:14px}
    .btn.ghost{background:transparent;border:1px solid #2b3550;color:var(--text)}
    .btn.small{padding:7px 10px;font-size:13px}
    footer{opacity:.7;padding:20px 10px;text-align:center;font-size:13px}
  </style>
</head>

<body>
<header>
  <div class="head-row wrap">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <h1>Neuro-Bot GPT-5 • Luma • Runway • Midjourney • Deepgram • Gemini</h1>
        <div class="muted-top">Единый ИИ: тексты, озвучка, фото/видео, анализ документов</div>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="card">
    <div class="grid">
      <div>
        <h2>Шесть нейросетей — один бот</h2>
        <p class="muted">
          <b>Neuro-Bot</b> объединяет: <b>GPT-5</b>, <b>Gemini 1.5 Pro</b>, <b>Midjourney</b>,
          <b>Luma</b>, <b>Runway</b> и <b>Deepgram</b>.
        </p>
        <div class="chip-row">
          <span class="badge">Тексты и анализ</span>
          <span class="badge">Изображения</span>
          <span class="badge">Видео 4K</span>
          <span class="badge">Озвучка</span>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
          <a class="btn" href="#tariffs">Выбрать тариф</a>
          <button class="btn ghost" id="btn-help" type="button">Задать вопрос</button>
        </div>
      </div>

      <div class="card" style="background:linear-gradient(180deg,#182033,#111626);border-color:#212b46">
        <h2>Под капотом</h2>
        <div class="badge">GPT-5</div>
        <ul class="list">
          <li>Тексты, сценарии, код</li>
          <li>Анализ PDF и изображений</li>
          <li>Озвучка ответов (AI-голос)</li>
        </ul>
        <div class="hr"></div>
        <div class="badge">Gemini 1.5 Pro</div>
        <ul class="list">
          <li>Длинные документы, таблицы, видео</li>
          <li>Точная фактическая обработка</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Тарифы -->
  <section id="tariffs" style="margin-top:12px">
    <h2>Тарифы</h2>
    <div class="grid">

      <div class="card" data-tier="start">
        <div class="badge">START</div>
        <div class="price">499 ₽/мес</div>
        <div class="note">3 мес — 1 299₽ • Год — 4 490₽</div>
        <ul class="tariff-feats">
          <li>• GPT-4o mini + Gemini (опц.)</li>
          <li>• 100 запросов в день</li>
          <li>• 10 изображений (768 px)</li>
        </ul>
        <div class="hr"></div>
        <button class="btn sub" data-plan="month">Оформить подписку</button>
      </div>

      <div class="card" data-tier="pro">
        <div class="badge">PRO</div>
        <div class="price">999 ₽/мес</div>
        <div class="note">3 мес — 2 799₽ • Год — 8 490₽</div>
        <ul class="tariff-feats">
          <li>• GPT-5 + Gemini 1.5 Pro</li>
          <li>• Midjourney / Luma — безлимит</li>
          <li>• 200 запросов, 50 изображений в день</li>
        </ul>
        <div class="hr"></div>
        <button class="btn sub" data-plan="month">Оформить подписку</button>
      </div>

      <div class="card" data-tier="ultimate">
        <div class="badge">ULTIMATE</div>
        <div class="price">1 999 ₽/мес</div>
        <div class="note">3 мес — 5 490₽ • Год — 15 990₽</div>
        <ul class="tariff-feats">
          <li>• GPT-5 безлимит + Gemini 1.5 Pro</li>
          <li>• Luma / Midjourney / Deepgram</li>
          <li>• Runway FullHD / 4K (оплата по ролику)</li>
        </ul>
        <div class="hr"></div>
        <button class="btn sub" data-plan="month">Оформить подписку</button>
      </div>

    </div>
  </section>
</main>

<footer>© Neuro-Bot · GPT-5 • Luma • Runway • Midjourney • Deepgram • Gemini</footer>

<script>
  // Bootstrap
  const tg = window.Telegram?.WebApp; tg?.ready(); tg?.expand();

  // bot username из query (обязательно передаётся из бота); оставляем ваш рабочий дефолт
  const qs  = new URLSearchParams(location.search);
  const BOT = qs.get('bot') || 'progpt5_bot';
  const SRC = (qs.get('src') || '').toLowerCase();    // 'subscribe' | 'menu' | ''

  function popup(text){
    try{ tg?.showPopup({title:'Neuro-Bot', message:text, buttons:[{type:'close'}]}); }catch(_){}
  }

  // Надёжная отправка в чат (для src=subscribe)
  async function sendToBot(payload){
    if (tg && typeof tg.sendData === 'function' && typeof tg.initData === 'string' && tg.initData.length > 0){
      try{
        // из меню может не быть контекста чата — запрашиваем доступ на запись
        if (!tg.initDataUnsafe?.chat){ try{ await tg.requestWriteAccess(); }catch(_){ } }
        tg.sendData(JSON.stringify(payload));
        popup('Запрос отправлен в бота. Счёт придёт в чат.');
        setTimeout(()=>{ try{ tg.close(); }catch(_){} }, 350);
        return;
      }catch(e){ console.error('sendData failed', e); }
    }
    // Фолбэк вне Telegram
    const tier = payload.tier || 'pro';
    const plan = payload.plan || 'month';
    window.location.href = `https://t.me/${BOT}?start=subscribe_${tier}_${plan}`;
  }

  // Кнопки «Оформить подписку»
  const payButtons = document.querySelectorAll('.card[data-tier] .sub');

  if (SRC === 'menu'){
    // Режим: открыто из «Меню». Оплату через мини-аппу отключаем.
    payButtons.forEach(btn => {
      btn.classList.add('ghost','small');
      btn.textContent = 'Открыть оплату в боте';
      btn.onclick = () => {
        if (tg?.openTelegramLink) tg.openTelegramLink(`https://t.me/${BOT}`);
        else window.location.href = `https://t.me/${BOT}`;
      };
    });
  } else {
    // Режим: открыто из «⭐ Подписка» (или по прямой ссылке) — отправляем payload → счёт
    payButtons.forEach(btn => {
      btn.onclick = (e) => {
        const card = e.currentTarget.closest('.card');
        const tier = card.getAttribute('data-tier');          // start|pro|ultimate
        const plan = btn.getAttribute('data-plan') || 'month';
        sendToBot({ type:'subscribe', tier, plan });
      };
    });
  }

  // «Задать вопрос»
  const help = document.getElementById('btn-help');
  if (help){
    help.onclick = () => {
      if (SRC === 'menu'){
        if (tg?.openTelegramLink) tg.openTelegramLink(`https://t.me/${BOT}`);
        else window.location.href = `https://t.me/${BOT}`;
      } else {
        sendToBot({type:'help'});
      }
    };
  }
</script>
</body>
</html>
